---
alwaysApply: true
---

# SQL Formatting Rules

When writing or formatting SQL code, follow these style guidelines:

## General Formatting

- Use spaces around parentheses in CREATE statements:
  `CREATE INDEX idx_name ON table_name (col1, col2)` not
  `CREATE INDEX idx_name ON table_name(col1, col2)`
- Align column definitions in CREATE TABLE statements for readability
- Use consistent indentation (4 spaces)

## Index Definitions

- Format with spaces around parentheses and proper indentation:
  ```sql
  CREATE INDEX idx_name ON table_name (col1, col2)
      WHERE condition;
  ```

## Trigger Definitions

- Split trigger clauses across multiple lines:
  ```sql
  CREATE TRIGGER trigger_name
      AFTER INSERT
      ON table_name
      FOR EACH ROW
  EXECUTE FUNCTION function_name();
  ```

## UPDATE Statements

- Align SET clauses vertically:
  ```sql
  UPDATE table_name
  SET col1   = value1,
      col2   = value2,
      col3   = value3
  WHERE condition;
  ```

## ON CONFLICT Clauses

- Format multi-line for readability:
  ```sql
  ON CONFLICT (batch_id) DO UPDATE SET queued_count = batch_stats.queued_count + 1,
                                       is_completed = FALSE;
  ```

## Comments

- Keep comments concise and informative
- Align comment formatting with code structure
